{% extends 'base.html.twig' %}

{% block title %}
	{{ parent() }}
	- Recherche
{% endblock %}

{% block header %}
	{% include "home/_searchBar.html.twig" %}
{% endblock %}

{% block body %}
	<div class="max-w-screen-xl mx-auto my-8 py-8 px-10 sm:px-12 sm:relative sm:bottom-4 bg-white lg:mx-auto lg:px-24 lg:rounded-lg">
		{% if products is defined and products is not empty %}
			<div class="flex justify-between items-center mb-4 my-2">
				<h2 class="text-3xl bold">Résultats:</h2>
				<p class="">{{ products|length }} {{ products[1].category.name }}
					</p>
			</div>

			<div class="rounded-lg grid grid-cols-1 gap-y-10 sm:grid-cols-2 gap-x-8 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-6">
				{% for product in products %}
					<div class="product_container w-full h-11/12 items-center mx-auto rounded-lg bg-gray-200 px-3 text-gray-700 py-4 max-w-xs flex flex-col justify-between popup" id="popup"">
						<div>
							<a href="{{ path('product_show', {'slug': product.slug}) }}">
								<div class="w-11/12 mx-auto overflow-hidden rounded-md card-zoom">
									<img src="{{ product.picture }}" alt="{{ product.slug }}" class="object-cover card-zoom-image items-center">
									<h1 class="card-zoom-text">{{ product.name|length > 50 ? product.name|slice(0, 50) ~ '' : product.name }}</h1>
								</div>
							</a>
							<div class="mt-2 p-2">
								<div class="flex text-sm font-bold justify-center">
									<p class="mr-3">H:
										<span class="bg-gray-100 px-0.5 rounded-sm w-11 inline-block text-center">{{ product.height }}</span>
									</p>
									<p class="mr-3">L:
										<span class="bg-gray-100 px-0.5 rounded-sm w-11 inline-block text-center">{{ product.width }}</span>
									</p>
									<p>P:
										<span class="bg-gray-100 px-0.5 rounded-sm w-11 inline-block text-center">{{ product.depth }}</span>
									</p>
								</div>
							
								<a href="{{ path('product_show', {'slug': product.slug}) }}">
									<h3 class="mt-4 text-gray-800 text-xl font-bold mx-auto text-center">
										{{ product.name|length > 50 ? product.name|slice(0, 50) ~ '...' : product.name }}
									</h3>
								</a>
							</div>
						</div>

						<div class="w-full flex justify-between mt-4 p-2">
							<a href="{{ product.url }}" target="_blank" class="block w-20">
								<img src="{{ product.partner.picture }}" alt="" class="object-cover">
							</a>
							<p class="mt-1 text-lg font-medium text-gray-900" id="price">
								{{ product.price|number_format(2) }}
								&#8364;
							</p>
						</div>
					</div>
				{% endfor %}
			</div>
		{% else %}
			<p>Aucun meuble ne correspond à votre recherche</p>
		{% endif %}
	</div>

{% endblock %}
